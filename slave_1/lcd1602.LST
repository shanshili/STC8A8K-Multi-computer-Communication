C51 COMPILER V9.00   LCD1602                                                               12/02/2021 15:29:08 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN lcd1602.OBJ
COMPILER INVOKED BY: E:\keil\C51\BIN\C51.EXE lcd1602.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "8A8K.H"
   2          #include "LCD1602.h"
   3          
   4          void delay(uint n)//å»¶æ—¶å‡½æ•°
   5          {
   6   1          uint i;
   7   1          uchar j;
   8   1              for(i=n;i>0;i++)//ï¼ï¼å»¶æ—¶æ²¡å†™å¯¹ï¼Œå¯¼è‡´çš„ä¸æ˜¾ç¤º
   9   1                for(j=0;j<2;j++);
  10   1      }
  11          
  12          //è¯»å†™åˆ¤æ–­å‡½æ•°
  13          void rwjudge()
  14          {
  15   1        uchar sta7;
  16   1        LCD_DB=0xFF;
  17   1        LCD_RS=0;
  18   1          LCD_RW=1;
  19   1        do
  20   1        {
  21   2            LCD_E=1;
  22   2            sta7=LCD_DB;//ç¬¬ä¸ƒä½æºå¸¦ä½¿èƒ½æ•°æ®ï¼Œsta7=1,ç¦æ­¢è¯»å†™ï¼›sta7=0,å…è®¸è¯»å†™
  23   2            LCD_E=0;//æ»¡è¶³æ¡ä»¶è¡¨ç¤ºsta=1ç¦æ­¢ï¼Œåˆ™ä¸€ç›´è¯»å–çŠ¶æ€å­—,ç›´åˆ°=0
  24   2        }
  25   1        while(sta7 & 0x80);//ä¸1éƒ½ä¸ºaï¼Œä¸0éƒ½ä¸º0ï¼Œæˆ‘æƒ³åˆ¤æ–­ç¬¬ä¸ƒä½ï¼Œåˆ™ç¬¬ä¸ƒä½ä¸º1åˆ™æ•´ä½“>0ï¼Œç¬
             -¬ä¸ƒä½ä¸º0ï¼Œåˆ™æ•´ä½“=0  
  26   1      }
  27          
  28          //åˆå§‹åŒ–å‡½æ•°
  29          void LCD_init(void)
  30          {
  31   1        rwjudge();
  32   1        LCD_w_command(0x38);//è®¾ç½®æ ¼å‰©ï¼ˆå³åŠŸèƒ½è®¾å®šæŒ‡ä»¤ DL=1æ•°æ®æ€»çº¿8ä½ N=2æ˜¾ç¤ºä¸¤è¡Œ F=0 5*7ç‚
             -¹é˜µï¼‰ï¿½ 8ä½ 2è¡Œ 5*7
  33   1        LCD_w_command(0x0c);//æ•´ä½“æ˜¾ç¤ºã€å…³å…‰æ ‡ã€ä¸é—ªçƒ(æ˜¾ç¤ºå¼€å…³æ§åˆ¶å‘½ä»¤)
  34   1        LCD_w_command(0x06);//ï¼ˆè¾“å…¥æ¨¡å¼è®¾ç½®  ï¼Œå¢é‡ä¸ç§»ä½
  35   1        LCD_w_command(0x01);//æ¸…é™¤å±å¹•
  36   1        delay(1);
  37   1      }
  38          
  39          //å†™æŒ‡ä»¤
  40          void LCD_w_command(uchar dat)
  41          { 
  42   1        rwjudge();
  43   1        LCD_RS=0;
  44   1        LCD_RW=0;
  45   1        LCD_DB=dat;
  46   1        LCD_E=1;
  47   1         //daté¡ºåºä¸çŸ¥é“æœ‰æ— å½±å“ï¼Œç­”ï¼šä¼šæœ‰å½±å“
  48   1        LCD_E=0;
  49   1      }
  50          
  51          //å†™æ•°æ®
  52          void LCD_w_data(uchar dat)
  53          { 
C51 COMPILER V9.00   LCD1602                                                               12/02/2021 15:29:08 PAGE 2   

  54   1        rwjudge();
  55   1        LCD_RS=1;
  56   1        LCD_RW=0;
  57   1        LCD_DB=dat;
  58   1        LCD_E=1;
  59   1        LCD_E=0;
  60   1      }
  61          
  62          //æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦
  63          void LCD_dischar(uchar x,uchar y,uchar dat)
  64          {//y=0ç¬¬äºŒè¡Œï¼›y=1ç¬¬ä¸€è¡Œ   //xæ˜¯å‰é¢ç©ºçš„æ ¼æ•°
  65   1          uchar address;
  66   1          if(y==1)
  67   1            address=0x80+x;
  68   1          else 
  69   1            address=0xc0+x;///æœ‰å¯èƒ½æ˜¯åŒºåˆ†ä¸¤è¡Œ
  70   1          LCD_w_command(address);
  71   1          LCD_w_data(dat);
  72   1      }
  73          
  74          //å†™ä¸€ä¸ªå­—ç¬¦ä¸²
  75          void LCD_disstr(uchar x, uchar y, uchar *str)
  76          {   //y=1ç¬¬äºŒè¡Œï¼›y=0ç¬¬ä¸€è¡Œã€‚xæ˜¯å‰é¢ç©ºçš„æ ¼æ•°
  77   1        uchar addr;
  78   1        addr = y*0x40+x;
  79   1        LCD_w_command(addr | 0x80);
  80   1        while(*str != '\0')
  81   1        {
  82   2          LCD_w_data(*str++);
  83   2        }
  84   1      }
  85          
  86          
  87          
  88          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    176    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
